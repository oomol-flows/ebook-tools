inputs_def:
  - handle: input_azw3
    json_schema:
      type: string
      ui:widget: file
      ui:options:
        filters:
          - name: AZW3/AZW Files
            extensions:
              - azw3
              - azw
        accept: ".azw3,.azw"
    description: "Input AZW3/AZW file to convert"
    nullable: false

  - handle: output_path
    json_schema:
      type: string
      ui:widget: save
      ui:options:
        filters:
          - name: EPUB Files
            extensions:
              - epub
        excludeAll: true
    description: "Output path for converted EPUB file"
    nullable: false

  - handle: quality
    json_schema:
      type: string
      enum:
        - "low"
        - "medium"
        - "high"
        - "best"
      default: "high"
    description: "Conversion quality setting"
    nullable: false

  - handle: preserve_metadata
    json_schema:
      type: boolean
      default: true
    description: "Preserve original metadata during conversion"
    nullable: false

  - handle: fix_drm_protected
    json_schema:
      type: boolean
      default: false
    description: "Attempt to process DRM-protected files (may fail for protected content)"
    nullable: false

  - handle: clean_formatting
    json_schema:
      type: boolean
      default: true
    description: "Clean and optimize formatting for EPUB"
    nullable: false

outputs_def:
  - handle: output_file
    description: "Path to the converted EPUB file"
    json_schema:
      type: string

  - handle: conversion_log
    description: "Conversion process log and status"
    json_schema:
      type: string

executor:
  name: python
  options:
    entry: __init__.py
    spawn: false

title: "AZW3 to EPUB Converter"
icon: ":carbon:book:"
description: "Convert AZW3/AZW ebook files to EPUB format using Calibre"
